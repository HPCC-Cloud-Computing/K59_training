# Apache

## File cấu hình của service 
Apache giữ file cấu hình chính của nó trong `/etc/apache2`

- `apache2.conf`: đây là file cấu hình chính cho server. Hầu như tât cả các việc cấu hình có thể được thực hiện trong file này dù vậy ta nêu cấu hình trên nhưng file riêng biệt. File này sẽ cấu hình các giá trị mặc định và là nơi để server đọc các cấu hình
- `ports.conf`: file được sử dụng để xác định cổng nào sẽ lắng nghe kết nối 
- `mods-enabled/` , `conf-enabled/` và `sites-enabled/` bao gồm các cấu hình cụ thể để quản lý module, golabal configuration hay các cấu hình virtual host
 

## File cấu hình systemd unit của service 

Ta sử lệnh `systemctl cat apache2.service` để hiển thị file cấu hình systemd unit của service được kết quả:

~~~
# /run/systemd/generator.late/apache2.service
# Automatically generated by systemd-sysv-generator

[Unit]
Documentation=man:systemd-sysv-generator(8)
SourcePath=/etc/init.d/apache2
Description=LSB: Apache2 web server
Before=multi-user.target
Before=multi-user.target
Before=multi-user.target
Before=graphical.target
Before=shutdown.target
After=local-fs.target
After=remote-fs.target
After=network-online.target
After=systemd-journald-dev-log.socket
After=nss-lookup.target
Wants=network-online.target
Conflicts=shutdown.target

[Service]
Type=forking
Restart=no
TimeoutSec=5min
IgnoreSIGPIPE=no
KillMode=process
GuessMainPID=no
RemainAfterExit=yes
ExecStart=/etc/init.d/apache2 start
ExecStop=/etc/init.d/apache2 stop
ExecReload=/etc/init.d/apache2 reload

# /lib/systemd/system/apache2.service.d/apache2-systemd.conf
[Service]
Type=forking
RemainAfterExit=no

~~~


2 file cấu hình chính là :

/run/systemd/generator.late/apache2.service
/lib/systemd/system/apache2.service.d/apache2-systemd.conf



## Enable/Disable service

Để `systemd` start service tự động trong quá trình khởi động hệ thống, ta phải enable chúng

~~~
	sudo systemctl enable apache2.service
~~~

Để disable service không cho khởi động tự động cùng hệ thống ta sử dụng

~~~
	sudo systemctl disable apache2.service
~~~

Để start một service sử dụng lệnh `start`
~~~
	sudo systemctl start apache2.service
~~~ 


Để stop một service ta có thể sử dụng
~~~
	sudo systemctl stop apache2.service 
~~~

